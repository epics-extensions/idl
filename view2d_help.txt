
			        VIEW2D
                  (Data Catcher 2D Image  Displayer)

				OVERVIEW

VIEW2D is a complete mouse driven 2D image browser for 2D data
catcher.  It provides very flexible 2D scan image accessing and
displaying. It also provides automatical hard copy generation.

For each 2D image it provides following types of IDL plot : TV, SURFACE, 
CONTOUR, SHOW3, and XSURFACE. The surface and contour plot can either 
plot vs X,Y index or vs real X,Y values.  For TV plot, it can be real
data image or rebin to full drawing area image. For TV image, it also
provides various types of image data query options. 
 
This program takes the 2D image file which is automatically generated by
the data catcher program, CATCHER_V1. The acquired 2D scan image are 
saved sequentially.  The number of images saved for a given scan depends 
on the number of detector PV names defined for the first (inner loop) 
scan record. Through a set of selection buttons, it allows the user 
freely to point to any scan set, and any image data in the scan set. 


			   IMAGE FILE 

The 2D image file used by VIEW2D must be created by the data catcher 
through monitoring a 2D scan. Both 1D and 2D data are saved by the data
catcher. The filename for 1D and 2D data share the same root name. 
For example, if the 1D scan data is saved in the 'catch1d.trashcan', 
then the 2D image data will be save in the 'catch1d.trashcan.image'. 
Only the 2D image file is used by VIEW2D.

The default image file name is 'catch1d.trashcan.image'.

			  IMAGE DATA SET

For simplicity in the following x represents the inner loop ( the first 
scan) and y represents for the outer loop ( the second scan).
For each image data set it consists of the following data entities:

String Array:
	'x_pv'      - x scan pvname (inner loop)
	'y_pv'      - y scan pvname (outer loop)
	'file1d'    - the filename used for saving 1D scan data 

Integer Array:
	scan #      - the current 1D scan number in 'file1d' as the 2D 
	              image is saved
	width       - the acquired x dim or width of the image
	height	    - the acquired y dim or height of the image
	detector #  - the corresponding detector number in 'x_pv' scan record 
	2D scan #   - the current 2d scan number
	y_req_npts  - the requested y dim data points

X Positioner Array:
	x_pos       - the x position array

Y Positioner Array:
	y_pos       - the y position array

2D Image Array:
	image       - the image array for the detector



			    USER INTERFACE

The user interface is very simple, first use the File->Open menu to
select the image file, then the total number of 2D scans and the total
number of 2D images found in the file are printed and the data is
properly setup. Then a user is ready to browse through any scan and 
any image.  The function of each widget is briefly given below.

				File

The File pulldown menu consists of four selection items: 'Open', 'Print', 
'PS_close', and 'Quit'.

The 'Open' button pops up the IDL file selection box which allows the 
user to select the 2D image file for viewing.  The default setting is
'catch1d.trashcan.image'.  

The 'Print' button will create a post script plot 'view2d.ps' and 
send a copy to the user's default printer. 

The 'PS_close' button closes the post script plot device, and restores
the X window plot device.
 
The 'Quit' button exits the VIEW2D program.


				Color

This menu allows the user dynamically to load and change the color table 
used by the program.


				Help

This menu gives this on-line help information.



			DROPLIST - View as

	TV 	- view data as a 2D image
	SURFACE - view data as a surface plot
	CONTOUR - view data as a contour plot
	SHOW3   - view TV + SURFACE + CONTOUR plot all together
        XSURFACE - view data through XSURFACE which provides more viewing
                   controls 



			DROPLIST - Scale

	By Data - TV image plot vs the x and y index range
	By User - TV image plot vs Xmin, Xmax, Ymin, and Ymax range 



			DROPLIST - Plot vs

	Step #  - plot vs the x and y step number (SURFACE/CONTOUR)
	Values  - plot vs the x and y position values (SURFACE/CONTOUR)



			   SCAN # CONTROLS 

This row of widgets provides the user with various controls of positioning 
the scan number in the image file.  It consists of 'First','Next','Prev',
'Last' buttons, Scan # entry text field, and a slider bar.  The result of
these Scan # control widgets always points to the first image of the 
selected scan set. 


			   Images Group 

Images group consists of 15 buttons. For a given scan set at most
15 images can be saved. The actaul images saved depend on the scan 
record setup.  If the selected button with image it will be plotted right
away, it the selected button without image the error message window will
pop up. 



			    Drawing Area


The drawing area is used for displaying TV, SURFACE, CONTOUR, and SHOW3 
plot.  The XSURFACE uses its own drawing window.

In TV image mode, click the middle mouse button in the drawing area will
refresh image information widgets: cursor location X, Y, and Z value.

In TV image mode, click the left mouse button in the drawing area will
popup the XZ and YZ image value query windows and update the image 
information widgets: cursor location X, Y, and Z value.



			    PROBE XZ Button

The XZ button turns on the XZ query mode, a user must use the left mouse
button to query the X and Z values in the XZ profile window. The values 
at the cursor are updated beneath the XZ button.  The middle or right mouse 
button terminates this query mode.



			    PROBE YZ Button

The YZ button turns on the YZ query mode, a user must use the left mouse
button to query the Y and Z values in the YZ profile window. The values 
at the cursor are updated beneath the YZ button.  The middle or right mouse 
button terminates this query mode.


			    User Entered Plot Ranges

Four text fields Xmin, Xmax, Ymin, Ymax are settable by the user
which specifies the image data index range used in 'By User' scale. 
The default user plot range is Ymin=0, Ymax=100, Xmin=0, Xmax=100. 

Proper range must be entered.  If the values entered are outside the
x and y index range, the IDL will not be able to show the data.



			    Information Block

The information block shows the information about current displayed
image. They include scan #, detector #, image #, scan record PV names, 
1D root filename used, corresponding 1D scan range, image width, and 
height.


